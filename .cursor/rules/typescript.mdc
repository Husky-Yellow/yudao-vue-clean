---
description: ç‰©è”ç½‘æ²»ç† - TypeScript ä¼ä¸šçº§ç±»å‹å®‰å…¨æŒ‡å—
glob: "**/*.{ts,tsx,vue}"
alwaysApply: true
---

# ğŸ”· TypeScript ä¼ä¸šçº§ç±»å‹å®‰å…¨æŒ‡å—

ä½ æ˜¯ä¸€ä½ **TypeScript ç±»å‹ç³»ç»Ÿä¸“å®¶**ï¼Œç²¾é€šä¸¥æ ¼æ¨¡å¼é…ç½®ã€é«˜çº§ç±»å‹ç¼–ç¨‹ã€æ³›å‹è®¾è®¡æ¨¡å¼ï¼Œæ·±åº¦ç†è§£ç‰©è”ç½‘ä¸šåŠ¡é¢†åŸŸçš„æ•°æ®ç»“æ„è®¾è®¡å’Œ API ç±»å‹å®‰å…¨å®è·µã€‚

## ğŸ¯ ç±»å‹å®‰å…¨æ ¸å¿ƒç­–ç•¥

### ğŸ“‹ ä¸¥æ ¼æ¨¡å¼é…ç½®
- **ğŸ›¡ï¸ ä¸¥æ ¼ç±»å‹æ£€æŸ¥** - `strict: true` + `noImplicitAny: true`
- **ğŸ” å®Œæ•´æ€§æ£€æŸ¥** - `exactOptionalPropertyTypes: true`
- **âš¡ æ€§èƒ½ä¼˜åŒ–** - `skipLibCheck: true` + `incremental: true`
- **ğŸ¯ è·¯å¾„æ˜ å°„** - `@/*` åˆ«å + ç»å¯¹å¯¼å…¥è·¯å¾„
- **ğŸ“¦ å£°æ˜æ–‡ä»¶** - è‡ªåŠ¨ç”Ÿæˆ + ç¬¬ä¸‰æ–¹åº“ç±»å‹æ”¯æŒ

### ğŸ—ï¸ ä¼ä¸šçº§ç±»å‹æ¶æ„
- **ğŸŒ API å¥‘çº¦é©±åŠ¨** - åç«¯æ¥å£ç±»å‹å®Œå…¨å¯¹é½
- **ğŸ“Š ä¸šåŠ¡åŸŸç±»å‹åˆ’åˆ†** - è®¾å¤‡ã€å·¥ä½œæµã€æƒé™ã€è¿è¥å››å¤§åŸŸ
- **ğŸ”„ ç±»å‹å¤ç”¨ç­–ç•¥** - åŸºç¡€ç±»å‹ + ç»„åˆç±»å‹ + å·¥å…·ç±»å‹
- **ğŸ› ï¸ ä»£ç ç”Ÿæˆå·¥å…·** - OpenAPI â†’ TypeScript ç±»å‹è‡ªåŠ¨ç”Ÿæˆ

## ğŸ“š ç‰©è”ç½‘ä¸šåŠ¡ç±»å‹ä½“ç³»

### ğŸ”Œ è®¾å¤‡ç®¡ç†ç±»å‹å®šä¹‰
```typescript
// ğŸ·ï¸ è®¾å¤‡åŸºç¡€å®ä½“ç±»å‹
interface DeviceEntity {
  readonly id: string                    // è®¾å¤‡å”¯ä¸€æ ‡è¯†
  deviceName: string                     // è®¾å¤‡åç§°
  deviceCode: string                     // è®¾å¤‡ç¼–ç 
  deviceType: DeviceType                 // è®¾å¤‡ç±»å‹
  deviceCategory: DeviceCategory         // è®¾å¤‡åˆ†ç±»
  deviceStatus: DeviceStatus             // è®¾å¤‡çŠ¶æ€
  manufacturer: string                   // åˆ¶é€ å•†
  model: string                          // è®¾å¤‡å‹å·
  firmwareVersion: string                // å›ºä»¶ç‰ˆæœ¬
  hardwareVersion: string                // ç¡¬ä»¶ç‰ˆæœ¬
  installLocation: LocationInfo          // å®‰è£…ä½ç½®
  networkConfig: NetworkConfig           // ç½‘ç»œé…ç½®
  specifications: DeviceSpecifications   // è®¾å¤‡è§„æ ¼
  maintainceInfo: MaintenanceInfo        // ç»´æŠ¤ä¿¡æ¯
  readonly createTime: string            // åˆ›å»ºæ—¶é—´
  readonly updateTime: string            // æ›´æ–°æ—¶é—´
  readonly createdBy: string             // åˆ›å»ºè€…
  readonly lastModifiedBy: string        // æœ€åä¿®æ”¹è€…
}

// ğŸ›ï¸ è®¾å¤‡ç±»å‹æšä¸¾ (è”åˆç±»å‹)
type DeviceType = 
  | 'sensor'          // ä¼ æ„Ÿå™¨
  | 'controller'      // æ§åˆ¶å™¨  
  | 'gateway'         // ç½‘å…³
  | 'camera'          // æ‘„åƒå¤´
  | 'actuator'        // æ‰§è¡Œå™¨
  | 'meter'           // ä»ªè¡¨
  | 'alarm'           // æŠ¥è­¦å™¨

type DeviceCategory = 
  | 'environmental'   // ç¯å¢ƒç›‘æµ‹
  | 'security'        // å®‰é˜²è®¾å¤‡
  | 'industrial'      // å·¥ä¸šè®¾å¤‡
  | 'building'        // æ¥¼å®‡è®¾å¤‡
  | 'energy'          // èƒ½æºè®¾å¤‡

// ğŸš¦ è®¾å¤‡çŠ¶æ€ç±»å‹ (å¸¦çŠ¶æ€è½¬æ¢çº¦æŸ)
type DeviceStatus = 
  | 'online'          // åœ¨çº¿
  | 'offline'         // ç¦»çº¿
  | 'error'           // æ•…éšœ
  | 'maintenance'     // ç»´æŠ¤ä¸­
  | 'upgrading'       // å‡çº§ä¸­
  | 'decommissioned'  // å·²æŠ¥åºŸ

// ğŸ“ ä½ç½®ä¿¡æ¯ç±»å‹
interface LocationInfo {
  latitude: number                       // çº¬åº¦ (-90 to 90)
  longitude: number                      // ç»åº¦ (-180 to 180)
  altitude?: number                      // æµ·æ‹”é«˜åº¦
  address: string                        // è¯¦ç»†åœ°å€
  buildingId?: string                    // å»ºç­‘ç‰©ID
  floor?: string                         // æ¥¼å±‚
  room?: string                          // æˆ¿é—´
  zone?: string                          // åŒºåŸŸ
}

// ğŸŒ ç½‘ç»œé…ç½®ç±»å‹
interface NetworkConfig {
  ipAddress?: string                     // IPåœ°å€
  macAddress: string                     // MACåœ°å€
  protocol: CommunicationProtocol        // é€šä¿¡åè®®
  port?: number                          // ç«¯å£å·
  connectionType: ConnectionType         // è¿æ¥ç±»å‹
  signalStrength?: number                // ä¿¡å·å¼ºåº¦ (0-100)
  lastCommunicationTime: string          // æœ€åé€šä¿¡æ—¶é—´
}

type CommunicationProtocol = 
  | 'tcp' | 'udp' | 'mqtt' | 'coap' | 'modbus' | 'bacnet'

type ConnectionType = 
  | 'ethernet' | 'wifi' | 'cellular' | 'zigbee' | 'lora'

// ğŸ“Š è®¾å¤‡è§„æ ¼ç±»å‹
interface DeviceSpecifications {
  powerRequirement: PowerRequirement     // ç”µæºéœ€æ±‚
  operatingEnvironment: EnvironmentSpec  // å·¥ä½œç¯å¢ƒ
  dimensions: PhysicalDimensions         // ç‰©ç†å°ºå¯¸
  weight: number                         // é‡é‡ (kg)
  certifications: string[]              // è®¤è¯æ ‡å‡†
  warrantyPeriod: number                 // ä¿ä¿®æœŸ (æœˆ)
}

interface PowerRequirement {
  voltage: number                        // å·¥ä½œç”µå‹ (V)
  current: number                        // å·¥ä½œç”µæµ (A)
  power: number                          // åŠŸè€— (W)
  batteryLife?: number                   // ç”µæ± ç»­èˆª (å°æ—¶)
}

interface EnvironmentSpec {
  temperatureRange: TemperatureRange     // å·¥ä½œæ¸©åº¦èŒƒå›´
  humidityRange: HumidityRange          // æ¹¿åº¦èŒƒå›´
  ipRating: string                       // é˜²æŠ¤ç­‰çº§
  vibrationResistance?: boolean          // æŠ—éœ‡æ€§
}

interface TemperatureRange {
  min: number                            // æœ€ä½æ¸©åº¦ (Â°C)
  max: number                            // æœ€é«˜æ¸©åº¦ (Â°C)
}

interface HumidityRange {
  min: number                            // æœ€ä½æ¹¿åº¦ (%)
  max: number                            // æœ€é«˜æ¹¿åº¦ (%)
}
```

### ğŸ“‹ å·¥ä½œæµå¼•æ“ç±»å‹å®šä¹‰
```typescript
// ğŸ”„ æµç¨‹å®šä¹‰ç±»å‹
interface ProcessDefinition {
  readonly id: string                    // æµç¨‹å®šä¹‰ID
  processKey: string                     // æµç¨‹æ ‡è¯†é”®
  processName: string                    // æµç¨‹åç§°
  processVersion: number                 // æµç¨‹ç‰ˆæœ¬
  category: ProcessCategory              // æµç¨‹åˆ†ç±»
  description?: string                   // æµç¨‹æè¿°
  bpmnXml: string                        // BPMN XMLå®šä¹‰
  formSchema?: FormSchema[]              // å…³è”è¡¨å•æ¨¡å¼
  participants: ProcessParticipant[]     // å‚ä¸è€…é…ç½®
  variables: ProcessVariable[]           // æµç¨‹å˜é‡
  isActive: boolean                      // æ˜¯å¦æ¿€æ´»
  readonly deployTime: string           // éƒ¨ç½²æ—¶é—´
  readonly deployedBy: string           // éƒ¨ç½²è€…
}

type ProcessCategory = 
  | 'approval'        // å®¡æ‰¹æµç¨‹
  | 'maintenance'     // ç»´æŠ¤æµç¨‹
  | 'incident'        // äº‹ä»¶å¤„ç†
  | 'change'          // å˜æ›´æµç¨‹
  | 'procurement'     // é‡‡è´­æµç¨‹

// ğŸ­ æµç¨‹å‚ä¸è€…ç±»å‹
interface ProcessParticipant {
  nodeId: string                         // èŠ‚ç‚¹ID
  participantType: ParticipantType       // å‚ä¸è€…ç±»å‹
  assignmentRule: AssignmentRule         // åˆ†é…è§„åˆ™
  candidateUsers?: string[]              // å€™é€‰ç”¨æˆ·
  candidateGroups?: string[]             // å€™é€‰ç»„
  autoAssign: boolean                    // è‡ªåŠ¨åˆ†é…
}

type ParticipantType = 
  | 'user'           // ç”¨æˆ·
  | 'role'           // è§’è‰²
  | 'group'          // ç”¨æˆ·ç»„
  | 'expression'     // è¡¨è¾¾å¼

type AssignmentRule = 
  | 'direct'         // ç›´æ¥åˆ†é…
  | 'round_robin'    // è½®è¯¢åˆ†é…
  | 'load_balance'   // è´Ÿè½½å‡è¡¡
  | 'random'         // éšæœºåˆ†é…

// ğŸ“Š æµç¨‹å®ä¾‹ç±»å‹
interface ProcessInstance {
  readonly id: string                    // æµç¨‹å®ä¾‹ID
  processDefinitionId: string            // æµç¨‹å®šä¹‰ID
  businessKey: string                    // ä¸šåŠ¡é”®
  processName: string                    // æµç¨‹åç§°
  status: ProcessInstanceStatus          // å®ä¾‹çŠ¶æ€
  priority: ProcessPriority              // ä¼˜å…ˆçº§
  startTime: string                      // å¼€å§‹æ—¶é—´
  endTime?: string                       // ç»“æŸæ—¶é—´
  duration?: number                      // æŒç»­æ—¶é—´ (æ¯«ç§’)
  startUserId: string                    // å‘èµ·ç”¨æˆ·
  startUserName: string                  // å‘èµ·ç”¨æˆ·å
  currentTasks: TaskInfo[]               // å½“å‰ä»»åŠ¡
  processVariables: Record<string, any>  // æµç¨‹å˜é‡
  attachments: ProcessAttachment[]       // é™„ä»¶
  comments: ProcessComment[]             // è¯„è®º
}

type ProcessInstanceStatus = 
  | 'running'        // è¿è¡Œä¸­
  | 'completed'      // å·²å®Œæˆ
  | 'suspended'      // å·²æš‚åœ
  | 'canceled'       // å·²å–æ¶ˆ
  | 'terminated'     // å·²ç»ˆæ­¢

type ProcessPriority = 'low' | 'normal' | 'high' | 'urgent'
```

### ğŸ” æƒé™ç®¡ç†ç±»å‹å®šä¹‰
```typescript
// ğŸ‘¤ ç”¨æˆ·å®ä½“ç±»å‹
interface UserEntity {
  readonly id: string                    // ç”¨æˆ·ID
  username: string                       // ç”¨æˆ·å
  email: string                          // é‚®ç®±
  mobile: string                         // æ‰‹æœºå·
  realName: string                       // çœŸå®å§“å
  nickname?: string                      // æ˜µç§°
  avatar?: string                        // å¤´åƒURL
  gender: Gender                         // æ€§åˆ«
  birthday?: string                      // ç”Ÿæ—¥
  status: UserStatus                     // ç”¨æˆ·çŠ¶æ€
  lastLoginTime?: string                 // æœ€åç™»å½•æ—¶é—´
  lastLoginIp?: string                   // æœ€åç™»å½•IP
  passwordExpiryDate?: string            // å¯†ç è¿‡æœŸæ—¶é—´
  isAccountLocked: boolean               // è´¦æˆ·æ˜¯å¦é”å®š
  failedLoginAttempts: number            // ç™»å½•å¤±è´¥æ¬¡æ•°
  roles: RoleEntity[]                    // ç”¨æˆ·è§’è‰²
  permissions: string[]                  // ç”¨æˆ·æƒé™
  organizationId: string                 // æ‰€å±ç»„ç»‡
  departmentId: string                   // æ‰€å±éƒ¨é—¨
  position?: string                      // èŒä½
  readonly createTime: string            // åˆ›å»ºæ—¶é—´
  readonly updateTime: string            // æ›´æ–°æ—¶é—´
}

type Gender = 'male' | 'female' | 'other'
type UserStatus = 'active' | 'inactive' | 'locked' | 'pending'

// ğŸ­ è§’è‰²å®ä½“ç±»å‹
interface RoleEntity {
  readonly id: string                    // è§’è‰²ID
  roleName: string                       // è§’è‰²åç§°
  roleKey: string                        // è§’è‰²æ ‡è¯†
  roleDescription?: string               // è§’è‰²æè¿°
  roleType: RoleType                     // è§’è‰²ç±»å‹
  roleLevel: number                      // è§’è‰²çº§åˆ«
  isSystem: boolean                      // ç³»ç»Ÿå†…ç½®è§’è‰²
  status: RoleStatus                     // è§’è‰²çŠ¶æ€
  permissions: PermissionEntity[]        // è§’è‰²æƒé™
  menuIds: string[]                      // å…³è”èœå•
  dataScope: DataScope                   // æ•°æ®æƒé™èŒƒå›´
  deptIds?: string[]                     // æ•°æ®æƒé™éƒ¨é—¨
  readonly createTime: string            // åˆ›å»ºæ—¶é—´
  readonly updateTime: string            // æ›´æ–°æ—¶é—´
}

type RoleType = 'system' | 'business' | 'custom'
type RoleStatus = 'active' | 'inactive'

// ğŸ”‘ æƒé™å®ä½“ç±»å‹
interface PermissionEntity {
  readonly id: string                    // æƒé™ID
  permissionName: string                 // æƒé™åç§°
  permissionKey: string                  // æƒé™æ ‡è¯†
  permissionType: PermissionType         // æƒé™ç±»å‹
  resourceType: ResourceType             // èµ„æºç±»å‹
  resourcePath?: string                  // èµ„æºè·¯å¾„
  httpMethod?: HttpMethod                // HTTPæ–¹æ³•
  description?: string                   // æƒé™æè¿°
  isSystem: boolean                      // ç³»ç»Ÿå†…ç½®æƒé™
  parentId?: string                      // çˆ¶æƒé™ID
  children?: PermissionEntity[]          // å­æƒé™
  readonly createTime: string            // åˆ›å»ºæ—¶é—´
}

type PermissionType = 'menu' | 'button' | 'api' | 'data'
type ResourceType = 'page' | 'component' | 'api' | 'file' | 'data'
type HttpMethod = 'GET' | 'POST' | 'PUT' | 'DELETE' | 'PATCH'

// ğŸ“Š æ•°æ®æƒé™ç±»å‹
type DataScope = 
  | 'all'            // å…¨éƒ¨æ•°æ®
  | 'organization'   // ç»„ç»‡æ•°æ®
  | 'department'     // éƒ¨é—¨æ•°æ®
  | 'department_sub' // éƒ¨é—¨åŠå­éƒ¨é—¨æ•°æ®
  | 'self'           // ä¸ªäººæ•°æ®
  | 'custom'         // è‡ªå®šä¹‰æ•°æ®
```

## ğŸ› ï¸ é«˜çº§ç±»å‹ç¼–ç¨‹æ¨¡å¼

### ğŸ¯ å·¥å…·ç±»å‹ç»„åˆç­–ç•¥
```typescript
// ğŸ”§ åŸºç¡€å·¥å…·ç±»å‹æ‰©å±•
type DeepPartial<T> = {
  [P in keyof T]?: T[P] extends object ? DeepPartial<T[P]> : T[P]
}

type DeepRequired<T> = {
  [P in keyof T]-?: T[P] extends object ? DeepRequired<T[P]> : T[P]
}

type DeepReadonly<T> = {
  readonly [P in keyof T]: T[P] extends object ? DeepReadonly<T[P]> : T[P]
}

// ğŸ“‹ API è¯·æ±‚ç±»å‹ç”Ÿæˆå™¨
type CreateRequest<T extends Record<string, any>> = Omit<
  T, 
  'id' | 'createTime' | 'updateTime' | 'createdBy' | 'lastModifiedBy'
> & {
  // åˆ›å»ºè¯·æ±‚å…è®¸çš„é¢å¤–å­—æ®µ
  [K in keyof T as T[K] extends string | undefined ? K : never]?: string
}

type UpdateRequest<T extends Record<string, any>> = Partial<
  Omit<T, 'id' | 'createTime' | 'updateTime' | 'createdBy'>
> & {
  readonly id: string  // ID å¿…éœ€ä¸”ä¸å¯å˜
}

type SearchRequest<T extends Record<string, any>> = DeepPartial<
  Pick<T, Exclude<keyof T, 'createTime' | 'updateTime'>>
> & {
  // æœç´¢å‚æ•°æ‰©å±•
  pageNum?: number
  pageSize?: number
  orderBy?: keyof T
  sortOrder?: 'asc' | 'desc'
  // æ—¶é—´èŒƒå›´æœç´¢
  startTime?: string
  endTime?: string
  // å…³é”®è¯æœç´¢
  keyword?: string
  // é«˜çº§ç­›é€‰
  filters?: SearchFilter<T>[]
}

// ğŸ” æœç´¢è¿‡æ»¤å™¨ç±»å‹
interface SearchFilter<T> {
  field: keyof T
  operator: FilterOperator
  value: any
  logic?: LogicOperator
}

type FilterOperator = 
  | 'eq'      // ç­‰äº
  | 'ne'      // ä¸ç­‰äº
  | 'gt'      // å¤§äº
  | 'ge'      // å¤§äºç­‰äº
  | 'lt'      // å°äº
  | 'le'      // å°äºç­‰äº
  | 'like'    // æ¨¡ç³ŠåŒ¹é…
  | 'in'      // åŒ…å«
  | 'notin'   // ä¸åŒ…å«
  | 'between' // åŒºé—´
  | 'isnull'  // ä¸ºç©º
  | 'notnull' // ä¸ä¸ºç©º

type LogicOperator = 'and' | 'or'

// ğŸ“Š åˆ†é¡µå“åº”ç±»å‹
interface PaginationMeta {
  readonly total: number        // æ€»è®°å½•æ•°
  readonly pageNum: number      // å½“å‰é¡µç 
  readonly pageSize: number     // æ¯é¡µå¤§å°
  readonly pages: number        // æ€»é¡µæ•°
  readonly hasNext: boolean     // æ˜¯å¦æœ‰ä¸‹ä¸€é¡µ
  readonly hasPrev: boolean     // æ˜¯å¦æœ‰ä¸Šä¸€é¡µ
}

interface PagedResponse<T> {
  readonly data: T[]                  // æ•°æ®åˆ—è¡¨
  readonly pagination: PaginationMeta // åˆ†é¡µä¿¡æ¯
  readonly success: boolean           // è¯·æ±‚æˆåŠŸæ ‡å¿—
  readonly message?: string           // å“åº”æ¶ˆæ¯
  readonly timestamp: string          // å“åº”æ—¶é—´æˆ³
}
```

### ğŸ¨ ä¸šåŠ¡ç±»å‹ç”Ÿæˆå™¨
```typescript
// ğŸ”§ ä¸šåŠ¡å®ä½“ç±»å‹ç”Ÿæˆ
type EntityOperations<T extends { id: string }> = {
  create: (data: CreateRequest<T>) => Promise<ApiResponse<T>>
  update: (data: UpdateRequest<T>) => Promise<ApiResponse<T>>
  delete: (id: string) => Promise<ApiResponse<void>>
  findById: (id: string) => Promise<ApiResponse<T>>
  findList: (params: SearchRequest<T>) => Promise<PagedResponse<T>>
  export: (params: SearchRequest<T>) => Promise<Blob>
}

// ğŸ­ è®¾å¤‡ç®¡ç† API ç±»å‹
type DeviceOperations = EntityOperations<DeviceEntity> & {
  // è®¾å¤‡ç‰¹æœ‰æ“ä½œ
  controlDevice: (id: string, command: DeviceCommand) => Promise<ApiResponse<void>>
  getDeviceStatus: (id: string) => Promise<ApiResponse<DeviceStatusInfo>>
  upgradefirmware: (id: string, firmwareUrl: string) => Promise<ApiResponse<void>>
  getDeviceData: (id: string, timeRange: TimeRange) => Promise<ApiResponse<DeviceData[]>>
  calibrateDevice: (id: string, calibrationData: CalibrationData) => Promise<ApiResponse<void>>
}

// ğŸ“‹ å·¥ä½œæµ API ç±»å‹
type ProcessOperations = EntityOperations<ProcessInstance> & {
  // å·¥ä½œæµç‰¹æœ‰æ“ä½œ
  startProcess: (definitionId: string, variables: Record<string, any>) => Promise<ApiResponse<ProcessInstance>>
  completeTask: (taskId: string, variables: Record<string, any>) => Promise<ApiResponse<void>>
  suspendProcess: (instanceId: string) => Promise<ApiResponse<void>>
  resumeProcess: (instanceId: string) => Promise<ApiResponse<void>>
  terminateProcess: (instanceId: string, reason: string) => Promise<ApiResponse<void>>
  getProcessHistory: (instanceId: string) => Promise<ApiResponse<ProcessHistoryEvent[]>>
}

// ğŸ” ç”¨æˆ·ç®¡ç† API ç±»å‹
type UserOperations = EntityOperations<UserEntity> & {
  // ç”¨æˆ·ç‰¹æœ‰æ“ä½œ
  changePassword: (userId: string, passwordData: PasswordChangeData) => Promise<ApiResponse<void>>
  resetPassword: (userId: string) => Promise<ApiResponse<{ temporaryPassword: string }>>
  lockUser: (userId: string, reason: string) => Promise<ApiResponse<void>>
  unlockUser: (userId: string) => Promise<ApiResponse<void>>
  assignRoles: (userId: string, roleIds: string[]) => Promise<ApiResponse<void>>
  getUserPermissions: (userId: string) => Promise<ApiResponse<string[]>>
}
```

### ğŸ›¡ï¸ ç±»å‹å®‰å…¨é˜²æŠ¤
```typescript
// ğŸ” ç±»å‹å®ˆå«å‡½æ•°
function isDeviceEntity(obj: unknown): obj is DeviceEntity {
  return (
    typeof obj === 'object' &&
    obj !== null &&
    typeof (obj as DeviceEntity).id === 'string' &&
    typeof (obj as DeviceEntity).deviceName === 'string' &&
    typeof (obj as DeviceEntity).deviceCode === 'string' &&
    ['sensor', 'controller', 'gateway', 'camera', 'actuator', 'meter', 'alarm']
      .includes((obj as DeviceEntity).deviceType)
  )
}

function isValidApiResponse<T>(response: unknown): response is ApiResponse<T> {
  return (
    typeof response === 'object' &&
    response !== null &&
    typeof (response as ApiResponse<T>).success === 'boolean' &&
    typeof (response as ApiResponse<T>).message === 'string' &&
    'data' in response
  )
}

// ğŸ› ï¸ ç±»å‹æ–­è¨€å‡½æ•°
function assertIsDeviceEntity(obj: unknown): asserts obj is DeviceEntity {
  if (!isDeviceEntity(obj)) {
    throw new Error('Invalid device entity data')
  }
}

function assertIsValidResponse<T>(response: unknown): asserts response is ApiResponse<T> {
  if (!isValidApiResponse<T>(response)) {
    throw new Error('Invalid API response format')
  }
}

// ğŸ¯ è¿è¡Œæ—¶ç±»å‹éªŒè¯
class TypeValidator {
  static validateDevice(data: unknown): DeviceValidationResult {
    const errors: string[] = []
    
    if (!isDeviceEntity(data)) {
      errors.push('Invalid device entity structure')
      return { isValid: false, errors }
    }
    
    // è®¾å¤‡åç§°éªŒè¯
    if (!data.deviceName || data.deviceName.length < 2) {
      errors.push('Device name must be at least 2 characters')
    }
    
    // è®¾å¤‡ç¼–ç éªŒè¯
    if (!data.deviceCode || !/^[A-Z0-9]{6,12}$/.test(data.deviceCode)) {
      errors.push('Device code must be 6-12 alphanumeric characters')
    }
    
    // ç½‘ç»œé…ç½®éªŒè¯
    if (data.networkConfig.ipAddress && 
        !/^(\d{1,3}\.){3}\d{1,3}$/.test(data.networkConfig.ipAddress)) {
      errors.push('Invalid IP address format')
    }
    
    return {
      isValid: errors.length === 0,
      errors
    }
  }
}

interface DeviceValidationResult {
  isValid: boolean
  errors: string[]
}
```

## ğŸ¯ å¼€å‘æœ€ä½³å®è·µ

### 1. ğŸš€ æ€§èƒ½ä¼˜åŒ–ç±»å‹
- **æ¡ä»¶ç±»å‹ä¼˜åŒ–** - ä½¿ç”¨æ¡ä»¶ç±»å‹å‡å°‘è¿è¡Œæ—¶ç±»å‹æ£€æŸ¥
- **è”åˆç±»å‹ç­–ç•¥** - ä¼˜å…ˆä½¿ç”¨è”åˆç±»å‹æ›¿ä»£æšä¸¾
- **ç±»å‹æ”¶çª„** - ä½¿ç”¨ç±»å‹å®ˆå«è¿›è¡Œæ™ºèƒ½ç±»å‹æ¨å¯¼
- **æ³›å‹çº¦æŸ** - åˆç†ä½¿ç”¨æ³›å‹çº¦æŸæé«˜ç±»å‹æ¨å¯¼ç²¾åº¦

### 2. ğŸ”’ ç±»å‹å®‰å…¨ç­–ç•¥
- **ä¸¥æ ¼æ¨¡å¼** - å¯ç”¨æ‰€æœ‰ TypeScript ä¸¥æ ¼æ£€æŸ¥é€‰é¡¹
- **è¿è¡Œæ—¶éªŒè¯** - å…³é”®ä¸šåŠ¡æ•°æ®è¿›è¡Œè¿è¡Œæ—¶ç±»å‹éªŒè¯
- **API è¾¹ç•Œ** - æ‰€æœ‰ API è°ƒç”¨éƒ½æœ‰å®Œæ•´ç±»å‹å®šä¹‰
- **é”™è¯¯å¤„ç†** - ç±»å‹åŒ–é”™è¯¯å¤„ç†å’Œå¼‚å¸¸ç®¡ç†

### 3. ğŸ—ï¸ å¯ç»´æŠ¤æ€§
- **ç±»å‹æ–‡æ¡£** - ä½¿ç”¨ JSDoc æ³¨é‡Šå¢å¼ºç±»å‹å¯è¯»æ€§
- **å‘½åè§„èŒƒ** - ç»Ÿä¸€çš„ç±»å‹å‘½åå’Œç»„ç»‡æ–¹å¼
- **ç‰ˆæœ¬å…¼å®¹** - è€ƒè™‘ç±»å‹å®šä¹‰çš„å‘å‰å…¼å®¹æ€§
- **ä»£ç ç”Ÿæˆ** - ä½¿ç”¨å·¥å…·è‡ªåŠ¨ç”Ÿæˆé‡å¤æ€§ç±»å‹å®šä¹‰